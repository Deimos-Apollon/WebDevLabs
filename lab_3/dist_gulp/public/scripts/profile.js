import{banUser,deletePost,getUserFriends,getUserPosts,getProfile}from"./client.js";$(document).ready(async function(){var t=document.location.href.split("/").slice(-1);const e=await getProfile(t);var s=await getUserPosts(t),t=await getUserFriends(t);console.log(e),$(".edit_profile_link").attr("href","/edit_profile/"+e.id),$(".profile_ban_btn").attr("id","banUser#"+e.id),$("#profile_user_img").attr("src",e.img),$("#profile_username").append($(`<p> Имя: <b> ${e.name} </b> </p>`)),$("#profile_birthdate").append($(` <p>Дата рождения: <b> ${e.birth} </b> </p>`)),$("#profile_role").append($(`<p>Роль: <b> ${e.role} </b> </p>`)),$("#profile_email").append($(`<p>Электронная почта: <b> ${e.email} </b> </p>`)),$("#profile_status").append($(`<p>Статус: <b> ${e.status} </b> </p>`)),$("#profile_id").append($(`<p>Идентификатор: <b> ${e.id} </b> </p>`)),s.forEach(t=>{t="<div class='profile_post'>"+`<img src=${e.img} alt="post profile img" class="post_profile_img">`+'<div class="profile_post_text_section"><div class="profile_post_header">'+`<a href='/profile/${t.user_id}' class="profile_post_username">`+e.name+'</a><div class="profile_post_control"><p>'+t.date+"</p>"+`<button type="button" class="btn btn-danger delete_post_btn" id="deletePost#${t.id}">`+"<i class='fa-solid fa-trash-can'> </i></button></div></div><p class=\"profile_post_text\">"+t.text+"</p></div></div>";$("#profile_posts").append($(t))}),t.forEach(t=>{t="<tr><th class='table_user_name' scope='row'>"+`<a href="/profile/${t.id}" class="user_friends_username">`+t.name+"</a></th><td class='table_user_birth_date' scope=''>"+t.birth+"</td><td class='table_user_role' scope=''>"+t.role+"</td><td class='table_user_access_status' scope=''>"+t.status+"</td><td class='table_user_email' scope=''>"+t.email+"</td><td class='table_user_interaction_buttons' scope=''>"+`<a href="/edit_profile/${t.id}">`+"<button type='button' class='btn btn-primary user_interaction_btn'><i class='fa-solid fa-pen'> </i></button></a>"+`<a href="/profile/${t.id}">`+"<button type='button' class='btn btn-primary user_interaction_btn'><i class='fa-solid fa-circle-info'> </i></button></a>"+`<button type="button" class="btn btn-danger user_interaction_btn ban_btn" id="banUser#${t.id}">`+"<i class='fa-solid fa-ban'> </i></button></td></tr>";$("#table_body").append($(t))}),$(".profile_ban_btn").on("click",async function(){var t=$(this).attr("id").split("banUser#")[1];await banUser(t),location.reload()}),$(".ban_btn").on("click",async function(){var t=$(this).attr("id").split("banUser#")[1];await banUser(t),location.reload()}),$("#profile_wall_header_posts").on("click",function(){$(this).css("color","#3498db"),$("#profile_wall_header_friends").css("color","#000000"),$("#profile_posts").css("display","block"),$("#profile_friends").css("display","none")}),$("#profile_wall_header_friends").on("click",function(){$(this).css("color","#3498db"),$("#profile_wall_header_posts").css("color","#000000"),$("#profile_posts").css("display","none"),$("#profile_friends").css("display","block")}),$(".delete_post_btn").on("click",async function(){var t=$(this).attr("id").split("deletePost#")[1];await deletePost(t),location.reload()})});